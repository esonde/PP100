(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[826],{735:function(e,t,a){Promise.resolve().then(a.bind(a,9167))},5700:function(e,t,a){"use strict";a.d(t,{default:function(){return i}});var s=a(7437),r=a(2265),l=a(7648);function i(e){let{nome:t,className:a="",showIcon:i=!0}=e,[n,o]=(0,r.useState)(null),[c,d]=(0,r.useState)(!0),[m,u]=(0,r.useState)(null);return((0,r.useEffect)(()=>{let e=async()=>{try{console.log('PoliticoLink: Searching for "'.concat(t,'"'));let e=await fetch("/data/persons.jsonl");if(!e.ok){console.warn("PoliticoLink: Failed to fetch persons registry: ".concat(e.status)),d(!1);return}let a=await e.text();console.log("PoliticoLink: Loaded ".concat(a.split("\n").filter(e=>e.trim()).length," persons"));let s=a.trim().split("\n").filter(e=>e.trim()).map(e=>{try{return JSON.parse(e)}catch(t){return console.warn("PoliticoLink: Failed to parse line: ".concat(e)),null}}).filter(Boolean),r=t.toLowerCase().replace(/^(on\.|onorevole|ministro|sottosegretario|presidente|pres\.)\s+/i,"").replace(/\s+/g," ").trim();console.log('PoliticoLink: Cleaned name: "'.concat(r,'"'));let l=s.find(e=>{let t="".concat(e.nome," ").concat(e.cognome).toLowerCase(),a="".concat(e.cognome," ").concat(e.nome).toLowerCase();return t===r||a===r});l||(l=s.find(e=>{let t="".concat(e.nome," ").concat(e.cognome).toLowerCase(),a="".concat(e.cognome," ").concat(e.nome).toLowerCase();return t.includes(r)||a.includes(r)||r.includes(e.nome.toLowerCase())||r.includes(e.cognome.toLowerCase())})),l?console.log("PoliticoLink: Found person: ".concat(l.nome," ").concat(l.cognome," (").concat(l.slug,")")):console.log('PoliticoLink: No person found for "'.concat(t,'"')),o(l||null),d(!1)}catch(e){console.error("PoliticoLink: Error loading persons registry:",e),u(e instanceof Error?e.message:"Unknown error"),d(!1)}};t&&e()},[t]),c)?(0,s.jsx)("span",{className:a,children:t}):m||!n?(t.toLowerCase().replace(/^(on\.|onorevole|ministro|sottosegretario|presidente|pres\.)\s+/i,"").replace(/[^a-z0-9\s]/g,"").replace(/\s+/g,"-").substring(0,50),(0,s.jsxs)(l.default,{href:"/politico/not-found?name=".concat(encodeURIComponent(t)),className:"text-gray-600 hover:text-gray-800 hover:underline transition-colors ".concat(a),title:"Cerca profilo di ".concat(t," (potrebbe non essere ancora mappato)"),children:[i&&(0,s.jsx)("span",{className:"mr-1",children:"\uD83D\uDD0D"}),t]})):(0,s.jsxs)(l.default,{href:"/politico/".concat(n.slug),className:"text-blue-600 hover:text-blue-800 hover:underline transition-colors ".concat(a),title:"Vai al profilo di ".concat(n.nome," ").concat(n.cognome),children:[i&&(0,s.jsx)("span",{className:"mr-1",children:"\uD83D\uDC64"}),t]})}},9167:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return n}});var s=a(7437),r=a(2265),l=a(2822),i=a(5700);function n(){var e;let[t,a]=(0,r.useState)([]),[n,o]=(0,r.useState)(!0),[c,d]=(0,r.useState)(null),[m,u]=(0,r.useState)({gruppo:"",oratore:"",type:"",severity:""});(0,r.useEffect)(()=>{(async()=>{try{let e=await fetch("/data/cards-20250127.jsonl");if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let t=(await e.text()).trim().split("\n").map(e=>JSON.parse(e));a(t),o(!1)}catch(e){d(e instanceof Error?e.message:"Errore sconosciuto"),o(!1)}})()},[]);let x=(0,r.useMemo)(()=>{let e=Array.from(new Set(t.map(e=>e.metadata.gruppo).filter(Boolean)));return{gruppi:e,oratori:Array.from(new Set(t.map(e=>e.metadata.oratore).filter(Boolean))),types:Array.from(new Set(t.map(e=>e.type))),severities:Array.from(new Set(t.map(e=>e.severity)))}},[t]),p=(0,r.useMemo)(()=>({gruppi:[{value:"",label:"Tutti i gruppi"},...x.gruppi.map(e=>({value:e,label:e}))],oratori:[{value:"",label:"Tutti i parlamentari"},...x.oratori.map(e=>({value:e,label:e}))],types:[{value:"",label:"Tutti i tipi"},...x.types.map(e=>({value:e,label:"fallacy"===e?"Fallacia":"spin"===e?"Spin":"duplicate"===e?"Duplicato":"stance"===e?"Stance":"metric"===e?"Metrica":e}))],severities:[{value:"",label:"Tutte le gravit\xe0"},{value:"low",label:"\uD83D\uDFE2 Bassa"},{value:"medium",label:"\uD83D\uDFE1 Media"},{value:"high",label:"\uD83D\uDFE0 Alta"},{value:"critical",label:"\uD83D\uDD34 Critica"}].filter(e=>""===e.value||x.severities.includes(e.value))}),[x]),g=(0,r.useMemo)(()=>t.filter(e=>(!m.gruppo||e.metadata.gruppo===m.gruppo)&&(!m.oratore||e.metadata.oratore===m.oratore)&&(!m.type||e.type===m.type)&&(!m.severity||e.severity===m.severity)),[t,m]),h=Object.values(m).some(e=>""!==e),v=e=>{switch(e){case"fallacy":return"badge-fallacy";case"spin":return"badge-spin";case"duplicate":return"badge-duplicate";case"stance":return"badge-stance";case"metric":return"badge-metric";default:return"badge"}},f=e=>{switch(e){case"low":return"severity-low";case"medium":return"severity-medium";case"high":return"severity-high";case"critical":return"severity-critical";default:return""}},y=e=>new Date(e).toLocaleDateString("it-IT",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return n?(0,s.jsxs)("div",{className:"text-center py-8 sm:py-12 px-4",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,s.jsx)("p",{className:"mt-4 text-gray-600",children:"Caricamento feed..."})]}):c?(0,s.jsxs)("div",{className:"text-center py-8 sm:py-12 px-4",children:[(0,s.jsx)("div",{className:"text-red-600 text-4xl sm:text-6xl mb-4",children:"⚠️"}),(0,s.jsx)("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-900 mb-2",children:"Errore nel caricamento"}),(0,s.jsx)("p",{className:"text-gray-600 mb-4 px-2",children:c}),(0,s.jsx)("p",{className:"text-sm text-gray-500 px-2",children:"Verifica che i file di dati siano presenti in public/data/"})]}):(0,s.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6",children:[(0,s.jsxs)("div",{className:"mb-6 sm:mb-8",children:[(0,s.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-2",children:"\uD83D\uDCF0 Feed Eventi"}),(0,s.jsx)("p",{className:"text-gray-600 text-sm sm:text-base",children:"Eventi rilevati automaticamente nel dibattito parlamentare"}),(0,s.jsxs)("div",{className:"mt-3 sm:mt-4 text-xs sm:text-sm text-gray-500",children:["Mostrando ",g.length," di ",t.length," eventi • Ultimo aggiornamento: ",y((null===(e=t[0])||void 0===e?void 0:e.created_at)||"")]})]}),(0,s.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-4 mb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"\uD83D\uDD0D Filtri"}),h&&(0,s.jsx)("button",{onClick:()=>{u({gruppo:"",oratore:"",type:"",severity:""})},className:"px-3 py-1 text-sm bg-red-100 text-red-700 rounded-md hover:bg-red-200 transition-colors",children:"❌ Cancella tutti"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uD83C\uDFDB️ Gruppo/Partito"}),(0,s.jsx)(l.ZP,{options:p.gruppi,value:p.gruppi.find(e=>e.value===m.gruppo),onChange:e=>u(t=>({...t,gruppo:(null==e?void 0:e.value)||""})),placeholder:"Gruppo",className:"w-full"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uD83D\uDC64 Parlamentare"}),(0,s.jsx)(l.ZP,{options:p.oratori,value:p.oratori.find(e=>e.value===m.oratore),onChange:e=>u(t=>({...t,oratore:(null==e?void 0:e.value)||""})),placeholder:"Parlamentare",className:"w-full"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uD83C\uDFAF Tipo Evento"}),(0,s.jsx)(l.ZP,{options:p.types,value:p.types.find(e=>e.value===m.type),onChange:e=>u(t=>({...t,type:(null==e?void 0:e.value)||""})),placeholder:"Tipo",className:"w-full"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"⚠️ Gravit\xe0"}),(0,s.jsx)(l.ZP,{options:p.severities,value:p.severities.find(e=>e.value===m.severity),onChange:e=>u(t=>({...t,severity:(null==e?void 0:e.value)||""})),placeholder:"Gravit\xe0",className:"w-full"})]})]})]}),(0,s.jsx)("div",{className:"space-y-6",children:g.map(e=>(0,s.jsxs)("div",{className:"card",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("span",{className:"badge ".concat(v(e.type)),children:e.type.toUpperCase()}),(0,s.jsx)("span",{className:"text-sm font-medium ".concat(f(e.severity)),children:e.severity.toUpperCase()})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("div",{className:"text-sm text-gray-500",children:y(e.created_at)}),(0,s.jsxs)("div",{className:"text-xs text-gray-400",children:["Confidenza: ",(100*e.confidence).toFixed(0),"%"]})]})]}),(0,s.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:e.title}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:e.description}),e.metadata.oratore&&(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 mb-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-700",children:"Oratore:"}),(0,s.jsx)("span",{className:"ml-2 text-gray-600",children:(0,s.jsx)(i.default,{nome:e.metadata.oratore,showIcon:!1})})]}),e.metadata.gruppo&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-700",children:"Gruppo:"}),(0,s.jsx)("span",{className:"ml-2 text-gray-600",children:e.metadata.gruppo})]}),e.metadata.seduta&&(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-medium text-gray-700",children:"Seduta:"}),(0,s.jsx)("span",{className:"ml-2 text-gray-600",children:e.metadata.seduta})]})]}),e.metadata.cluster_size&&e.metadata.cluster_size>1&&(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:["\uD83D\uDD17 Cluster di ",e.metadata.cluster_size," oratori"]})}),e.metadata.spans&&e.metadata.spans.length>0&&(0,s.jsxs)("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Testo evidenziato:"}),(0,s.jsx)("div",{className:"text-sm text-gray-600 font-mono",children:e.metadata.spans.map((e,t)=>(0,s.jsx)("span",{className:"bg-yellow-200 px-1 rounded",children:e.text},t))})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("a",{href:e.source_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"\uD83D\uDD17 Vedi fonte"}),(0,s.jsxs)("div",{className:"text-xs text-gray-400",children:["ID: ",e.id.slice(0,8),"..."]})]})]},e.id))}),0===g.length&&(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"text-gray-400 text-6xl mb-4",children:"\uD83D\uDCED"}),(0,s.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:h?"Nessun evento trovato":"Nessun evento"}),(0,s.jsx)("p",{className:"text-gray-600",children:h?"Prova a modificare i filtri applicati per vedere pi\xf9 risultati.":"Non ci sono eventi da mostrare al momento."})]})]})}}},function(e){e.O(0,[648,822,971,117,744],function(){return e(e.s=735)}),_N_E=e.O()}]);