(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[173],{9710:function(e,t,s){Promise.resolve().then(s.bind(s,7285))},5700:function(e,t,s){"use strict";s.d(t,{default:function(){return n}});var a=s(7437),c=s(2265),r=s(7648);function n(e){let{nome:t,className:s="",showIcon:n=!0}=e,[l,o]=(0,c.useState)(null),[i,d]=(0,c.useState)(!0),[x,m]=(0,c.useState)(null);return((0,c.useEffect)(()=>{let e=async()=>{try{console.log('PoliticoLink: Searching for "'.concat(t,'"'));let e=await fetch("/data/persons.jsonl");if(!e.ok){console.warn("PoliticoLink: Failed to fetch persons registry: ".concat(e.status)),d(!1);return}let s=await e.text();console.log("PoliticoLink: Loaded ".concat(s.split("\n").filter(e=>e.trim()).length," persons"));let a=s.trim().split("\n").filter(e=>e.trim()).map(e=>{try{return JSON.parse(e)}catch(t){return console.warn("PoliticoLink: Failed to parse line: ".concat(e)),null}}).filter(Boolean),c=t.toLowerCase().replace(/^(on\.|onorevole|ministro|sottosegretario|presidente|pres\.)\s+/i,"").replace(/\s+/g," ").trim();console.log('PoliticoLink: Cleaned name: "'.concat(c,'"'));let r=a.find(e=>{let t="".concat(e.nome," ").concat(e.cognome).toLowerCase(),s="".concat(e.cognome," ").concat(e.nome).toLowerCase();return t===c||s===c});r||(r=a.find(e=>{let t="".concat(e.nome," ").concat(e.cognome).toLowerCase(),s="".concat(e.cognome," ").concat(e.nome).toLowerCase();return t.includes(c)||s.includes(c)||c.includes(e.nome.toLowerCase())||c.includes(e.cognome.toLowerCase())})),r?console.log("PoliticoLink: Found person: ".concat(r.nome," ").concat(r.cognome," (").concat(r.slug,")")):console.log('PoliticoLink: No person found for "'.concat(t,'"')),o(r||null),d(!1)}catch(e){console.error("PoliticoLink: Error loading persons registry:",e),m(e instanceof Error?e.message:"Unknown error"),d(!1)}};t&&e()},[t]),i)?(0,a.jsx)("span",{className:s,children:t}):x||!l?(t.toLowerCase().replace(/^(on\.|onorevole|ministro|sottosegretario|presidente|pres\.)\s+/i,"").replace(/[^a-z0-9\s]/g,"").replace(/\s+/g,"-").substring(0,50),(0,a.jsxs)(r.default,{href:"/politico/not-found?name=".concat(encodeURIComponent(t)),className:"text-gray-600 hover:text-gray-800 hover:underline transition-colors ".concat(s),title:"Cerca profilo di ".concat(t," (potrebbe non essere ancora mappato)"),children:[n&&(0,a.jsx)("span",{className:"mr-1",children:"\uD83D\uDD0D"}),t]})):(0,a.jsxs)(r.default,{href:"/politico/".concat(l.slug),className:"text-blue-600 hover:text-blue-800 hover:underline transition-colors ".concat(s),title:"Vai al profilo di ".concat(l.nome," ").concat(l.cognome),children:[n&&(0,a.jsx)("span",{className:"mr-1",children:"\uD83D\uDC64"}),t]})}},7285:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return n}});var a=s(7437),c=s(2265),r=s(5700);function n(){let[e,t]=(0,c.useState)(null),[s,n]=(0,c.useState)(!0),[l,o]=(0,c.useState)(null),[i,d]=(0,c.useState)("pp_score"),[x,m]=(0,c.useState)("desc");(0,c.useEffect)(()=>{(async()=>{try{let e=await fetch("/data/scores-rolling-20250127.json");if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));let s=await e.json();t(s),n(!1)}catch(e){o(e instanceof Error?e.message:"Errore sconosciuto"),n(!1)}})()},[]);let p=e=>new Date(e).toLocaleDateString("it-IT",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),h=e=>e>=80?"text-green-600":e>=70?"text-blue-600":e>=60?"text-yellow-600":"text-red-600",u=(null==e?void 0:e.scores)?[...e.scores].sort((e,t)=>{let s=e[i],a=t[i];return("pp_score"===i&&(s=e.pp_score,a=t.pp_score),"asc"===x)?s>a?1:-1:s<a?1:-1}):[],g=e=>{i===e?m("asc"===x?"desc":"asc"):(d(e),m("desc"))};return s?(0,a.jsxs)("div",{className:"text-center py-8 sm:py-12 px-4",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Caricamento metriche..."})]}):l?(0,a.jsxs)("div",{className:"text-center py-8 sm:py-12 px-4",children:[(0,a.jsx)("div",{className:"text-red-600 text-4xl sm:text-6xl mb-4",children:"⚠️"}),(0,a.jsx)("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-900 mb-2",children:"Errore nel caricamento"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4 px-2",children:l}),(0,a.jsx)("p",{className:"text-sm text-gray-500 px-2",children:"Verifica che i file di dati siano presenti in public/data/"})]}):e?(0,a.jsxs)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6",children:[(0,a.jsxs)("div",{className:"mb-6 sm:mb-8",children:[(0,a.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-2",children:"\uD83C\uDFC6 Leaderboard PP100"}),(0,a.jsx)("p",{className:"text-gray-600 text-sm sm:text-base",children:"Classifica parlamentari per qualit\xe0 del dibattito - Punti Politico (PP)"}),(0,a.jsxs)("div",{className:"mt-3 sm:mt-4 text-xs sm:text-sm text-gray-500",children:["Finestra rolling: ",e.window_days," giorni • Ultimo aggiornamento: ",p(e.generated_at)," •",e.scores.length," parlamentari monitorati"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 sm:gap-6 mb-6 sm:mb-8",children:[(0,a.jsxs)("div",{className:"card text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:e.scores.length}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Parlamentari"})]}),(0,a.jsxs)("div",{className:"card text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:(e.scores.reduce((e,t)=>e+t.pp_score,0)/e.scores.length).toFixed(1)}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"PP (Punti Politico) Medio"})]}),(0,a.jsxs)("div",{className:"card text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:e.scores.filter(e=>e.pp_score>=80).length}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Eccellenti (≥80)"})]}),(0,a.jsxs)("div",{className:"card text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-red-600",children:e.scores.filter(e=>e.pp_score<60).length}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Critici (<60)"})]})]}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Classifica PP (Punti Politico)"}),(0,a.jsxs)("div",{className:"flex space-x-4 text-sm",children:[(0,a.jsxs)("button",{onClick:()=>g("pp_score"),className:"px-3 py-1 rounded ".concat("pp_score"===i?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"),children:["PP Score ","pp_score"===i&&("desc"===x?"↓":"↑")]}),(0,a.jsxs)("button",{onClick:()=>g("oratore"),className:"px-3 py-1 rounded ".concat("oratore"===i?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"),children:["Nome ","oratore"===i&&("desc"===x?"↓":"↑")]}),(0,a.jsxs)("button",{onClick:()=>g("gruppo"),className:"px-3 py-1 rounded ".concat("gruppo"===i?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"),children:["Gruppo ","gruppo"===i&&("desc"===x?"↓":"↑")]})]})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,a.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Pos"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Parlamentare"}),(0,a.jsx)("th",{className:"text-left py-3 px-4 font-medium text-gray-700",children:"Gruppo"}),(0,a.jsx)("th",{className:"text-center py-3 px-4 font-medium text-gray-700",children:"PP Score"}),(0,a.jsx)("th",{className:"text-center py-3 px-4 font-medium text-gray-700",children:"Componenti"}),(0,a.jsx)("th",{className:"text-center py-3 px-4 font-medium text-gray-700",children:"Metriche"})]})}),(0,a.jsx)("tbody",{children:u.map((e,t)=>(0,a.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[(0,a.jsxs)("td",{className:"py-3 px-4 text-sm text-gray-500",children:["#",t+1]}),(0,a.jsxs)("td",{className:"py-3 px-4",children:[(0,a.jsx)("div",{className:"font-medium text-gray-900",children:(0,a.jsx)(r.default,{nome:e.oratore,showIcon:!1})}),(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["Aggiornato: ",p(e.last_updated)]})]}),(0,a.jsx)("td",{className:"py-3 px-4 text-sm text-gray-600",children:e.gruppo}),(0,a.jsxs)("td",{className:"py-3 px-4 text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold ".concat(h(e.pp_score)),children:e.pp_score.toFixed(1)}),e.confidence_interval&&(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:[e.confidence_interval.lower.toFixed(1)," - ",e.confidence_interval.upper.toFixed(1)]})]}),(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsxs)("div",{className:"grid grid-cols-5 gap-1 text-xs",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"font-bold ".concat(h(e.components.Q)),children:"Q"}),(0,a.jsx)("div",{className:"text-gray-600",children:e.components.Q})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"font-bold ".concat(h(e.components.K)),children:"K"}),(0,a.jsx)("div",{className:"text-gray-600",children:e.components.K})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"font-bold ".concat(h(e.components.V)),children:"V"}),(0,a.jsx)("div",{className:"text-gray-600",children:e.components.V})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"font-bold ".concat(h(e.components.I)),children:"I"}),(0,a.jsx)("div",{className:"text-gray-600",children:e.components.I})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"font-bold ".concat(h(e.components.R)),children:"R"}),(0,a.jsx)("div",{className:"text-gray-600",children:e.components.R})]})]})}),(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsxs)("div",{className:"text-xs text-gray-600 space-y-1",children:[(0,a.jsxs)("div",{children:["Interventi: ",e.metrics.interventions_count]}),(0,a.jsxs)("div",{children:["Fallacie: ",e.metrics.fallacies_detected]}),(0,a.jsxs)("div",{children:["Duplicati: ",e.metrics.duplicates_count]}),(0,a.jsxs)("div",{children:["Coerenza: ",(100*e.metrics.stance_consistency).toFixed(0),"%"]})]})})]},e.oratore))})]})})]}),(0,a.jsxs)("div",{className:"mt-8 p-4 bg-gray-50 rounded-lg",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900 mb-3",children:"\uD83D\uDCCB Legenda Componenti PP (Punti Politico)"}),(0,a.jsxs)("div",{className:"grid md:grid-cols-5 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-bold text-blue-600",children:"Q - Quality:"}),(0,a.jsx)("div",{className:"text-gray-600",children:"Argomentativit\xe0 e chiarezza"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-bold text-green-600",children:"K - Knowledge:"}),(0,a.jsx)("div",{className:"text-gray-600",children:"Preparazione e citazioni corrette"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-bold text-yellow-600",children:"V - Veracity:"}),(0,a.jsx)("div",{className:"text-gray-600",children:"Accuratezza e evitare fallacie"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-bold text-purple-600",children:"I - Integrity:"}),(0,a.jsx)("div",{className:"text-gray-600",children:"Coerenza e evitare spin"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-bold text-red-600",children:"R - Respect:"}),(0,a.jsx)("div",{className:"text-gray-600",children:"Civilt\xe0 e evitare attacchi personali"})]})]})]})]}):(0,a.jsxs)("div",{className:"text-center py-8 sm:py-12 px-4",children:[(0,a.jsx)("div",{className:"text-gray-400 text-4xl sm:text-6xl mb-4",children:"\uD83D\uDCCA"}),(0,a.jsx)("h2",{className:"text-xl sm:text-2xl font-semibold text-gray-900 mb-2",children:"Nessun dato"}),(0,a.jsx)("p",{className:"text-gray-600 px-2",children:"Non ci sono metriche da mostrare al momento."})]})}}},function(e){e.O(0,[648,971,117,744],function(){return e(e.s=9710)}),_N_E=e.O()}]);