(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[157],{2973:function(o,e,n){Promise.resolve().then(n.bind(n,5700))},5700:function(o,e,n){"use strict";n.d(e,{default:function(){return s}});var t=n(7437),c=n(2265),r=n(7648);function s(o){let{nome:e,className:n="",showIcon:s=!0}=o,[a,i]=(0,c.useState)(null),[l,u]=(0,c.useState)(!0),[m,p]=(0,c.useState)(null);return((0,c.useEffect)(()=>{let o=async()=>{try{console.log('PoliticoLink: Searching for "'.concat(e,'"'));let o=await fetch("/data/persons.jsonl");if(!o.ok){console.warn("PoliticoLink: Failed to fetch persons registry: ".concat(o.status)),u(!1);return}let n=await o.text();console.log("PoliticoLink: Loaded ".concat(n.split("\n").filter(o=>o.trim()).length," persons"));let t=n.trim().split("\n").filter(o=>o.trim()).map(o=>{try{return JSON.parse(o)}catch(e){return console.warn("PoliticoLink: Failed to parse line: ".concat(o)),null}}).filter(Boolean),c=e.toLowerCase().replace(/^(on\.|onorevole|ministro|sottosegretario|presidente|pres\.)\s+/i,"").replace(/\s+/g," ").trim();console.log('PoliticoLink: Cleaned name: "'.concat(c,'"'));let r=t.find(o=>{let e="".concat(o.nome," ").concat(o.cognome).toLowerCase(),n="".concat(o.cognome," ").concat(o.nome).toLowerCase();return e===c||n===c});r||(r=t.find(o=>{let e="".concat(o.nome," ").concat(o.cognome).toLowerCase(),n="".concat(o.cognome," ").concat(o.nome).toLowerCase();return e.includes(c)||n.includes(c)||c.includes(o.nome.toLowerCase())||c.includes(o.cognome.toLowerCase())})),r?console.log("PoliticoLink: Found person: ".concat(r.nome," ").concat(r.cognome," (").concat(r.slug,")")):console.log('PoliticoLink: No person found for "'.concat(e,'"')),i(r||null),u(!1)}catch(o){console.error("PoliticoLink: Error loading persons registry:",o),p(o instanceof Error?o.message:"Unknown error"),u(!1)}};e&&o()},[e]),l)?(0,t.jsx)("span",{className:n,children:e}):m||!a?(e.toLowerCase().replace(/^(on\.|onorevole|ministro|sottosegretario|presidente|pres\.)\s+/i,"").replace(/[^a-z0-9\s]/g,"").replace(/\s+/g,"-").substring(0,50),(0,t.jsxs)(r.default,{href:"/politico/not-found?name=".concat(encodeURIComponent(e)),className:"text-gray-600 hover:text-gray-800 hover:underline transition-colors ".concat(n),title:"Cerca profilo di ".concat(e," (potrebbe non essere ancora mappato)"),children:[s&&(0,t.jsx)("span",{className:"mr-1",children:"\uD83D\uDD0D"}),e]})):(0,t.jsxs)(r.default,{href:"/politico/".concat(a.slug),className:"text-blue-600 hover:text-blue-800 hover:underline transition-colors ".concat(n),title:"Vai al profilo di ".concat(a.nome," ").concat(a.cognome),children:[s&&(0,t.jsx)("span",{className:"mr-1",children:"\uD83D\uDC64"}),e]})}}},function(o){o.O(0,[648,971,117,744],function(){return o(o.s=2973)}),_N_E=o.O()}]);