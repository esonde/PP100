(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[438],{8608:function(e,t,s){Promise.resolve().then(s.bind(s,8887))},8887:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return r}});var a=s(7437),n=s(2265),i=s(6907);function r(){let[e,t]=(0,n.useState)(null),[s,r]=(0,n.useState)(null),[l,d]=(0,n.useState)([]),[c,o]=(0,n.useState)(!0),[x,m]=(0,n.useState)(null);return((0,n.useEffect)(()=>{(async()=>{try{let e=await fetch("/data/manifest.json?ts=".concat(Date.now()));if(!e.ok)throw Error("Failed to fetch manifest: ".concat(e.status));let s=await e.json();t(s);let a=await (0,i.gs)(s);if(r(a),(null==a?void 0:a.source)==="parquet"&&a.downloadUrl)try{let e=await (0,i.qD)(a.downloadUrl,20);d(e)}catch(e){console.warn("Failed to load Parquet data:",e),d([])}o(!1)}catch(e){m(e instanceof Error?e.message:"Unknown error"),o(!1)}})()},[]),c)?(0,a.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 py-8",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Caricamento interventi..."})]})}):x?(0,a.jsx)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 py-8",children:(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"text-red-600 text-xl mr-3",children:"❌"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-red-900",children:"Errore nel caricamento"}),(0,a.jsx)("p",{className:"text-red-800 mt-1",children:x})]})]})})}):(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 py-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Interventi Live"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Monitoraggio in tempo reale degli interventi dalla Camera e dal Senato"})]}),(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-md p-6 border-l-4 border-blue-500 mb-8",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Stato Pipeline"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-blue-600",children:(null==s?void 0:s.count)===-1?"File disponibile":(null==s?void 0:s.count)===0?"Nessun intervento":"".concat(null==s?void 0:s.count," interventi")}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["File: ",(null==s?void 0:s.downloadUrl)?(0,a.jsxs)("a",{href:s.downloadUrl,download:s.filename,className:"text-blue-600 hover:text-blue-800 underline hover:no-underline font-medium",title:"Scarica ".concat(s.filename),children:["\uD83D\uDCE5 ",s.filename]}):(null==s?void 0:s.filename)||"N/A"]}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["Ultimo aggiornamento: ",(null==s?void 0:s.lastUpdate)||"N/A"]})]}),(0,a.jsx)("div",{className:"text-4xl",children:"\uD83D\uDCCA"})]})}),(null==s?void 0:s.source)==="parquet"&&(0,a.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6 mb-8",children:(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)("div",{className:"text-blue-600 text-xl mr-3",children:"\uD83D\uDCA1"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"File Parquet Rilevato"}),(0,a.jsxs)("p",{className:"text-blue-800 text-sm mb-3",children:["Gli interventi sono disponibili nel file"," ",s.downloadUrl?(0,a.jsxs)("a",{href:s.downloadUrl,download:s.filename,className:"text-blue-700 hover:text-blue-900 underline hover:no-underline font-medium",title:"Scarica ".concat(s.filename),children:["\uD83D\uDCE5 ",s.filename]}):(0,a.jsx)("code",{className:"bg-blue-100 px-2 py-1 rounded",children:s.filename})," ","e ora sono visualizzabili direttamente nella pagina!"]}),(0,a.jsxs)("p",{className:"text-blue-800 text-sm",children:[(0,a.jsx)("strong",{children:"Funzionalit\xe0:"})," Lettura diretta file Parquet nel browser tramite WebAssembly."]})]})]})}),l.length>0&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:["Ultimi ",l.length," Interventi"]}),(0,a.jsx)("span",{className:"text-sm text-gray-500",children:"Dati letti direttamente dal file Parquet"})]}),(0,a.jsx)("div",{className:"space-y-4",children:l.map((e,t)=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-900",children:e.oratore||"Oratore sconosciuto"}),(0,a.jsx)("span",{className:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded",children:e.gruppo||"Gruppo N/A"})]}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:e.ts_start?(0,i.p6)(e.ts_start):"Data N/A"})]}),(0,a.jsx)("div",{className:"mb-2",children:(0,a.jsxs)("span",{className:"text-xs text-gray-600",children:["Fonte: ",e.source||"N/A"," • Seduta: ",e.seduta||"N/A"]})}),(0,a.jsx)("div",{className:"text-sm text-gray-800 leading-relaxed",children:e.text?e.text.length>200?(0,a.jsxs)(a.Fragment,{children:[e.text.substring(0,200),"...",(0,a.jsxs)("span",{className:"text-blue-600 text-xs ml-2",children:["(",e.text.length," caratteri)"]})]}):e.text:(0,a.jsx)("span",{className:"text-gray-400 italic",children:"Testo non disponibile"})}),e.spans_frasi&&e.spans_frasi.length>0&&(0,a.jsxs)("div",{className:"mt-2 text-xs text-gray-500",children:[(0,a.jsx)("span",{className:"font-medium",children:"Spans frasi:"})," ",e.spans_frasi.length," segmenti"]})]},t))}),(0,a.jsxs)("div",{className:"mt-4 text-center",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Mostrando i primi ",l.length," interventi su ",(null==s?void 0:s.count)||"?"," totali"]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Per scaricare tutti i dati, clicca sul nome del file sopra"})]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 mb-8",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Stato Pipeline M1"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-700",children:"Ingest (P0):"}),(0,a.jsx)("span",{className:"ml-2 text-green-600",children:"✅ Attivo"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-700",children:"Frequenza:"}),(0,a.jsx)("span",{className:"ml-2 text-gray-600",children:"Ogni 5 minuti"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-700",children:"Formato:"}),(0,a.jsx)("span",{className:"ml-2 text-gray-600",children:"Parquet + spans"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("span",{className:"font-medium text-gray-700",children:"Fonti:"}),(0,a.jsx)("span",{className:"ml-2 text-gray-600",children:"Camera + Senato"})]})]})]}),(0,a.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6 mb-6",children:(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)("div",{className:"text-green-600 text-xl mr-3",children:"\uD83D\uDCCB"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-green-900 mb-2",children:"Feed vs Interventi Live"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-green-800",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h5",{className:"font-semibold mb-2",children:"\uD83D\uDCCA Interventi Live (M1)"}),(0,a.jsxs)("ul",{className:"space-y-1",children:[(0,a.jsx)("li",{children:"• Stato operativo pipeline"}),(0,a.jsx)("li",{children:"• File disponibili per download"}),(0,a.jsx)("li",{children:"• Metriche tecniche ingest"}),(0,a.jsx)("li",{children:"• Status Camera/Senato"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h5",{className:"font-semibold mb-2",children:"\uD83D\uDCF0 Feed (M2+)"}),(0,a.jsxs)("ul",{className:"space-y-1",children:[(0,a.jsx)("li",{children:"• Interventi rielaborati semanticamente"}),(0,a.jsx)("li",{children:"• Ranking qualit\xe0 argomentativa"}),(0,a.jsx)("li",{children:"• Badge e indicatori"}),(0,a.jsx)("li",{children:"• Organizzazione per temi"})]})]})]})]})]})}),(0,a.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:(0,a.jsxs)("div",{className:"flex items-start",children:[(0,a.jsx)("div",{className:"text-yellow-600 text-xl mr-3",children:"\uD83D\uDE80"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-yellow-900 mb-2",children:"Prossimi Step"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm text-yellow-800",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"M2:"})," Stile & Topics → conversione Parquet → JSON per web"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"M3:"})," fastText triage → argomentativit\xe0 e check-worthiness"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"M4:"})," Near-duplicate detection → badge “Copiaincolla Radar”"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"M5:"})," LLM ragionatore → fallacie, claims, steelman"]})]})]})]})}),(0,a.jsx)("div",{className:"mt-8 text-center",children:(0,a.jsx)("a",{href:"/metrics",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700",children:"← Torna alle Metriche"})})]})}},6907:function(e,t,s){"use strict";function a(e){let t=new Date,s=5*Math.ceil(t.getMinutes()/5),a=new Date(t);a.setMinutes(s,0,0),a<=t&&a.setMinutes(a.getMinutes()+5);let n=a.getTime()-t.getTime();return{nextUpdate:a.toLocaleString("it-IT"),timeUntil:"".concat(Math.ceil(n/6e4)," minuti")}}function n(e){try{return new Date(e).toLocaleString("it-IT",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch(e){return"Data non valida"}}async function i(e){try{let t=await fetch(e);if(!t.ok)return 0;return(await t.text()).trim().split("\n").filter(e=>e.trim()).length}catch(e){return 0}}async function r(e){try{let t=await fetch(e);if(!t.ok)return 0;let a=await t.arrayBuffer(),n=new Uint8Array(a),i=(await s.e(337).then(s.bind(s,1337))).default,{readParquet:r}=await s.e(337).then(s.bind(s,1337)),{tableFromIPC:l}=await s.e(716).then(s.bind(s,4716));await i();let d=r(n);return l(d.intoIPCStream()).numRows}catch(e){return console.error("Error reading Parquet file:",e),0}}async function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;try{let a=await fetch(e);if(!a.ok)return[];let n=await a.arrayBuffer(),i=new Uint8Array(n),r=(await s.e(337).then(s.bind(s,1337))).default,{readParquet:l}=await s.e(337).then(s.bind(s,1337)),{tableFromIPC:d}=await s.e(716).then(s.bind(s,4716));await r();let c=l(i),o=d(c.intoIPCStream()),x=[],m=Math.min(o.numRows,t);for(let e=0;e<m;e++){let t={};o.schema.fields.forEach(s=>{let a=o.getChild(s.name);a&&(t[s.name]=a.get(e))}),x.push(t)}return x}catch(e){return console.error("Error reading Parquet file:",e),[]}}async function d(e){try{let t=await fetch(e);if(!t.ok)return[];return(await t.text()).trim().split("\n").filter(e=>e.trim()).map(e=>JSON.parse(e))}catch(e){return[]}}async function c(){try{let[e,t,s]=await Promise.all([d("/data/persons.jsonl"),d("/data/party_registry.jsonl"),d("/data/identities_inbox.jsonl")]);return{personsCount:e.length,partiesCount:t.length,inboxCount:s.length,persons:e,parties:t,downloadUrls:{persons:"/data/persons.jsonl",parties:"/data/party_registry.jsonl",inbox:"/data/identities_inbox.jsonl"}}}catch(e){return{personsCount:0,partiesCount:0,inboxCount:0,persons:[],parties:[],downloadUrls:{persons:"/data/persons.jsonl",parties:"/data/party_registry.jsonl",inbox:"/data/identities_inbox.jsonl"}}}}async function o(e){var t;if(!(null===(t=e.current)||void 0===t?void 0:t.interventions))return{count:0,filename:"N/A",lastUpdate:"N/A",source:"none",downloadUrl:""};let s=e.current.interventions.split("/").pop()||"N/A",a=e.generated_at,l="/data/".concat(s);if(s.endsWith(".parquet"))try{return{count:await r("/data/".concat(s)),filename:s,lastUpdate:n(a),source:"parquet",downloadUrl:l}}catch(e){return{count:-1,filename:s,lastUpdate:n(a),source:"parquet",downloadUrl:l}}if(s.endsWith(".json")||s.endsWith(".jsonl"))try{return{count:await i("/data/".concat(s)),filename:s,lastUpdate:n(a),source:"json",downloadUrl:l}}catch(e){return{count:0,filename:s,lastUpdate:n(a),source:"json",downloadUrl:l}}return{count:0,filename:s,lastUpdate:n(a),source:"none",downloadUrl:""}}s.d(t,{f6:function(){return a},gs:function(){return o},jy:function(){return c},p6:function(){return n},qD:function(){return l}})}},function(e){e.O(0,[971,117,744],function(){return e(e.s=8608)}),_N_E=e.O()}]);